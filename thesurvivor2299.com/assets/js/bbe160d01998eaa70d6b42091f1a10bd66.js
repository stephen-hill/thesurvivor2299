(function(e){e.fn.kkcountdown=function(d){function f(a){var b=0;void 0===a.id&&(a.id="kk_"+Math.random((new Date).getTime()));b=a.id in g?g[a.id]:a.attr("data-seconds");if(void 0===b){var c=new Date,c=Math.floor(c.getTime()/1E3),e=a.attr("data-time");void 0===e&&(e=a.attr("time"));b=e-c}g[a.id]=b-1;d.warnClass&&b<d.warnSeconds&&a.addClass(d.warnClass);0>b?(a.html(d.textAfterCount),d.callback&&d.callback(a)):86400>=b?setTimeout(function(){l(!0,a,b);f(a)},1E3):setTimeout(function(){l(!1,a,b);f(a)}, 1E3)}function l(a,b,c){var e=h(c%60);c=Math.floor(c/60);var f=h(c%60);c=Math.floor(c/60);var m=h(c%24);c=Math.floor(c/24);a&&!1!=d.oneDayClass&&b.addClass(d.oneDayClass);if(0!=c||d.displayZeroDays)b.find(".kkc-days").html(c),b.find(".kkc-days-text").html(k(c,"day"));b.find(".kkc-hours").html(m);b.find(".kkc-hours-text").html(k(m,"hour"));b.find(".kkc-min").html(f);b.find(".kkc-sec").html(e)}function k(a,b){var c=d[b+"sText"];d.rusNumbers?5<=a&&20>a?c=d[b+"sText"]:(c=1*(""+a).replace(/^\d+(\d)$/,"$1"), c=1==c?d[b+"Text"]:2<=c&&4>=c?d[b+"s2Text"]:d[b+"sText"]):1==a&&(c=d[b+"Text"]);return c}function h(a){s="";10>a&&(a="0"+a);return a}d=e.extend({dayText:"day ",days2Text:"days ",daysText:"days ",hourText:":",hours2Text:"hours ",hoursText:":",minutesText:":",secondsText:"",textAfterCount:"---",oneDayClass:!1,displayDays:!0,displayZeroDays:!0,addClass:!1,callback:!1,warnSeconds:60,warnClass:!1,rusNumbers:!1},d);var g=[];this.each(function(){var a=e(this),b=e(document.createElement("span")).addClass("kkcountdown-box"), c=e(document.createElement("span")).addClass("kkc-days"),g=e(document.createElement("span")).addClass("kkc-hours"),h=e(document.createElement("span")).addClass("kkc-min"),m=e(document.createElement("span")).addClass("kkc-sec"),l=e(document.createElement("span")).addClass("kkc-days-text"),k=e(document.createElement("span")).addClass("kkc-hours-text"),n=e(document.createElement("span")).addClass("kkc-min-text"),p=e(document.createElement("span")).addClass("kkc-sec-text");!1!=d.addClass&&b.addClass(d.addClass); k.html(d.hoursText);n.html(d.minutesText);p.html(d.secondsText);b.append(c).append(l).append(g).append(k).append(h).append(n).append(m).append(p);a.append(b);f(a)})}})(jQuery);